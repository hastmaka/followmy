"use strict";(self.webpackChunkporfolio=self.webpackChunkporfolio||[]).push([[640],{2067:function(e,t,n){n.d(t,{Z:function(){return j}});var r=n(3433),i=n(4165),o=n(5861),a=n(4942),s=n(1413),d=n(5987),l=n(5936),c=n(6795),u=n(2947),f=n(2007),p=n.n(f),x=function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if(!["date","id","dollarsPerHour"].includes(t)&&(null===n||""===n||isNaN(n)))return{key:t,value:n}}return!0};x.prototype={obj:p().object.isRequired};var h=n(296),w=n(2791),b=(n(788),n(9211),n(3329)),v=n(6711),g=n(68),m=n(1286),Z=n(184),y=["user","rows","columns","rowModesModel","setRowModesModel"],A=["isNew"],R={borderRadius:"4px",border:"1px solid lightgrey"};function j(e){var t=e.user,n=e.rows,f=e.columns,p=e.rowModesModel,j=e.setRowModesModel,M=(0,d.Z)(e,y),N=(0,w.useCallback)((function(e){window.displayNotification({type:e.type,content:e.content}),console.log(e)}),[]),C=(0,w.useCallback)((function(e){j((0,s.Z)((0,s.Z)({},p),{},(0,a.Z)({},e,{mode:l.se.Edit})))}),[p]),k=(0,w.useCallback)((function(e){j((0,s.Z)((0,s.Z)({},p),{},(0,a.Z)({},e,{mode:l.se.View}))),M.setIsAddActive(!1)}),[p]),E=(0,w.useCallback)((function(e){j((0,s.Z)((0,s.Z)({},p),{},(0,a.Z)({},e,{mode:l.se.View,ignoreModifications:!0}))),n.find((function(t){return t.id===e})).isNew&&M.setRows((function(t){return t.filter((function(t){return t.id!==e}))})),M.setIsAddActive(!1)}),[p]),q=(0,w.useCallback)(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,r){var o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){var r=x(n);if(!0!==r)return t({type:"error",content:"".concat(r.key," can't be ").concat(r.value)});e()}));case 2:if(JSON.stringify(n)!==JSON.stringify(r)){e.next=7;break}return window.displayNotification({type:"warning",content:"Row not saved, cells are empty or no data was changed"}),e.abrupt("return",r);case 7:if(!n.isNew){e.next=14;break}return n.isNew,o=(0,d.Z)(n,A),window.dispatch(h.D.createNewRecordInUserTable({newR:(0,s.Z)({},o),collection:t.select})),window.displayNotification({type:"success",content:"Row saved successfully!!"}),e.abrupt("return",o);case 14:return window.dispatch(h.D.updateUserTable({newRow:n,collection:t.select})),window.displayNotification({type:"success",content:"Row edited successfully!!"}),e.abrupt("return",n);case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[]),D=(0,w.useMemo)((function(){return[].concat((0,r.Z)(f),[{field:"action",headerName:"Action",align:"center",type:"actions",sortable:!1,getActions:function(e){var t,n=(null===(t=p[e.id])||void 0===t?void 0:t.mode)===l.se.Edit;return n?[(0,Z.jsx)(c.u,{icon:(0,Z.jsx)(b.Z,{sx:{fill:"green"}}),label:"Save",onClick:function(t){M.setIsAddActive(!1),k(e.id)}}),(0,Z.jsx)(c.u,{icon:(0,Z.jsx)(v.Z,{sx:{fill:"red"}}),label:"Cancel",className:"textPrimary",onClick:function(t){M.setIsAddActive(!1),E(e.id)},color:"inherit"})]:[(0,Z.jsx)(g.Z,{title:"Edit",children:(0,Z.jsx)(c.u,{icon:(0,Z.jsx)(m.Z,{sx:{fill:"white"}}),label:"Edit",disabled:!0===n||M.isAddActive,onClick:function(t){M.setIsAddActive(!0),C(e.id)}})})]}}])}),[p,k,E,C,M.isAddActive]);return(0,Z.jsx)(u._,(0,s.Z)({sx:R,rows:n,columns:D,getRowId:function(e){return e.id},pageSize:10,rowsPerPageOptions:[10,20],editMode:"row",onRowEditStart:function(e,t){return t.defaultMuiPrevented=!0},onRowEditStop:function(e,t){return t.defaultMuiPrevented=!0},experimentalFeatures:{newEditingApi:!0},onRowModesModelChange:function(e){return j(e)},rowModesModel:p,processRowUpdate:q,onProcessRowUpdateError:N},M))}j.prototype={user:p().object.isRequired,rows:p().array.isRequired,columns:p().array.isRequired,rowModesModel:p().object.isRequired,setRowModesModel:p().func.isRequired,rest:p().object}},788:function(e,t,n){n.d(t,{A:function(){return d}});var r=n(4415),i=n(926),o=n(2007),a=n.n(o),s=n(184),d=function(e){var t=e.id,n=e.value,o=e.options,a=e.api,d=e.daysAlreadyAdded,l=e.isNew;return(0,s.jsx)(r.Z,{fullWidth:!0,value:n,onChange:function(e){if(!d.length&&l)return a.setEditCellValue({id:t,field:"date",value:e.target.value});d.length>=1&&(d.includes(e.target.value)?window.displayNotification({type:"warning",content:"This day already exist"}):a.setEditCellValue({id:t,field:"date",value:e.target.value}))},renderValue:function(e){return e},children:o.map((function(e){return(0,s.jsx)(i.Z,{value:e,children:e},e)}))})};d.prototype={id:a().number.isRequired,value:a().string.isRequired,options:a().array.isRequired,api:a().object.isRequired}},140:function(e,t,n){n.d(t,{Z:function(){return N}});var r=n(4165),i=n(4942),o=n(1413),a=n(3433),s=n(5861),d=n(9439),l=n(2791),c=n(9434),u=n(2007),f=n.n(u),p=n(3767),x=n(68),h=n(3400),w=n(7630),b=n(2419),v=n(5936),g=n(9211),m=n(4696),Z=n(2804),y=n(4654),A=function(e){var t={};return e.forEach((function(e){switch(e.field){case"date":t[e.field]="";break;case"action":break;default:t[e.field]=0}})),t},R=function(e){return e.replace(/[.,_]/g," ").replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))},j=n(184),M=(0,w.ZP)(p.Z)((function(e){var t=e.theme;return{height:"60px",border:"1px solid ".concat(t.palette.tableBorder),backgroundColor:t.palette.indigoDye,borderRadius:"4px 4px 0 0",flexDirection:"row",alignItems:"center",padding:"0 10px",justifyContent:"space-between"}}));function N(e){var t=e.setRows,n=e.isAddActive,u=e.setIsAddActive,f=e.setRowModesModel,w=e.user,N=e.columns,C=(0,c.v9)((function(e){return e.admin})).month,k=(0,l.useState)((0,m.getActualMonthAndYear)()),E=(0,d.Z)(k,2),q=E[0],D=E[1],I=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(!0),n=(0,m.createId)(20),t((function(e){return[].concat((0,a.Z)(e),[(0,o.Z)((0,o.Z)({id:n},A(N)),{},{isNew:!0})])})),f((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,i.Z)({},n,{mode:v.se.Edit,fieldToFocus:"date"}))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,j.jsxs)(M,{children:[(0,j.jsx)(g.Z,{text:R(w.select),sx:{color:"white"}}),(0,j.jsxs)(p.Z,{direction:"row",gap:"10px",alignItems:"center",children:[(0,j.jsxs)(p.Z,{direction:"row",gap:"10px",alignItems:"center",children:[(0,j.jsx)(g.Z,{text:"Select Month"}),(0,j.jsx)(Z.Z,{disabled:n,option:(0,a.Z)(C),value:q,onChange:function(e){D(e.target.value),window.dispatch((0,y.getUserTableData)({uid:w.uid,collection:w.select,monthAndYear:e.target.value}))},from:"toolbar"})]}),(0,j.jsx)(x.Z,{title:"Add",placement:"bottom",children:(0,j.jsx)("span",{children:(0,j.jsx)(h.Z,{disabled:n,onClick:I,children:(0,j.jsx)(b.Z,{sx:function(e){var t=e.palette;return{fill:n?t.tableBorder:t.tableColor}}})})})})]})]})}N.prototype={setRows:f().func.isRequired,isAddActive:f().bool.isRequired,setIsAddActive:f().func.isRequired,setRowModesModel:f().func.isRequired,user:f().object.isRequired,columns:f().array.isRequired}},640:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var r=n(9439),i=n(2791),o=n(9434),a=n(3767),s=n(4554),d=n(7630),l=n(442),c=n(3833),u=n(9211),f=n(184);(0,d.ZP)(a.Z)((function(e){e.theme;return{}}));function p(){var e,t=(0,o.v9)((function(e){return e.admin})).user,n=(0,i.useState)({earn:0,expenses:0,hours:0}),s=(0,r.Z)(n,2),d=s[0],p=s[1];(0,i.useEffect)((function(){var e,n=null===t||void 0===t||null===(e=t.tableData)||void 0===e?void 0:e.data.reduce((function(e,t){var n=t.uber,r=t.lyft,i=t.other,o=t.gas,a=t.expenses,s=t.miles,d=t.hours;return e.earn+=n+r+i,e.expenses+=o+a+.08*s,e.hours+=d,e}),{earn:0,expenses:0,hours:0}),r=n.earn,i=n.expenses,o=n.hours;p({earn:r,expenses:i,hours:o})}),[t.tableData.data]);var x=d.earn,h=d.expenses,w=d.hours;return(0,f.jsxs)(l.L,{children:[(0,f.jsxs)(a.Z,{direction:"row",alignItems:"center",p:"0 0 0 20px",gap:"20px",children:[(0,f.jsx)(u.Z,{text:"Earn:\xa0$".concat(x.toFixed(2)),sx:{color:"#e9c46a"}}),(0,f.jsx)(u.Z,{text:"Expenses:\xa0$".concat(h.toFixed(2)),sx:{color:"#e63946"}}),(0,f.jsx)(u.Z,{text:"Total:\xa0$".concat((x-h).toFixed(2)),sx:{color:"#2a9d8f"}}),(0,f.jsx)(u.Z,{text:"Hours:\xa0".concat(w.toFixed(2)),sx:{color:"#2a6d9d"}}),(0,f.jsx)(u.Z,{text:"Days:\xa0".concat(null===t||void 0===t||null===(e=t.tableData)||void 0===e?void 0:e.data.length),sx:{color:"#2a9d99"}})]}),(0,f.jsx)(c.x,{})]})}var x=n(4696),h=n(7809),w=n(2067),b=n(140),v=n(788),g=(0,d.ZP)(a.Z)((function(e){e.theme;return{margin:"10px",height:"calc(100vh - 80px)"}}));function m(){var e=(0,o.v9)((function(e){return e.admin})).user,t=(0,i.useState)([]),n=(0,r.Z)(t,2),a=n[0],d=n[1],l=(0,i.useMemo)((function(){return(0,x.monthDays)(e.tableData.id)}),[e.tableData.id]),c=(0,i.useState)({}),m=(0,r.Z)(c,2),Z=m[0],y=m[1],A=(0,i.useState)(!1),R=(0,r.Z)(A,2),j=R[0],M=R[1];(0,i.useEffect)((function(t){d(e.tableData.data)}),[e.tableData.id,e.tableData.data]);var N=[{field:"date",headerName:"date",type:"singleSelect",flex:1,minWidth:180,editable:!0,align:"center",headerAlign:"center",renderEditCell:function(t){return(0,f.jsx)(v.A,{daysAlreadyAdded:e.tableData.data.map((function(e){return e.date})),isNew:t.row.isNew,options:l,value:t.value,api:t.api,id:t.id})}},{field:"uber",headerName:"uber",type:"number",flex:1,editable:!0,align:"center",headerAlign:"center"},{field:"lyft",headerName:"lyft",type:"number",flex:1,editable:!0,align:"center",headerAlign:"center"},{field:"other",headerName:"other",type:"number",flex:1,editable:!0,align:"center",headerAlign:"center"},{field:"hours",headerName:"hours",type:"number",flex:1,editable:!0,align:"center",headerAlign:"center"},{field:"gas",headerName:"gas",type:"number",flex:1,editable:!0,align:"center",headerAlign:"center"},{field:"expenses",headerName:"expenses",type:"number",flex:1,editable:!0,align:"center",headerAlign:"center"},{field:"miles",headerName:"miles",type:"number",flex:1,editable:!0,align:"center",headerAlign:"center",renderCell:function(e){return(0,f.jsx)(u.Z,{text:"".concat(e.row.miles," / $").concat((.08*e.row.miles).toFixed(2))})}},{field:"dollarsPerHour",headerName:"$/hr",type:"number",flex:1,align:"center",headerAlign:"center",renderCell:function(e){var t=e.row,n=t.uber,r=t.lyft,i=t.other,o=t.hours,a=t.miles,s=(n+r+i-t.gas-t.expenses-.08*a)/o;return(0,f.jsx)(u.Z,{text:"".concat(s.toFixed(2)," / hr")})}}];return(0,f.jsx)(g,{children:(0,f.jsx)(s.Z,{sx:{height:"100%",width:"100%"},children:(0,f.jsx)(w.Z,{user:e,rows:a,setRows:d,columns:N,daysToRender:l,setIsAddActive:M,isAddActive:j,setRowModesModel:y,rowModesModel:Z,components:{Toolbar:b.Z,Footer:p},componentsProps:{toolbar:{setRows:d,isAddActive:j,setIsAddActive:M,setRowModesModel:y,user:e,columns:N}},disableSelectionOnClick:!0,sx:function(e){var t=e.palette;return(0,h.ui)(t)}})})})}}}]);
//# sourceMappingURL=640.41607566.chunk.js.map